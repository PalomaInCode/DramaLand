<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="css/style_cl.css">
</head>
<body>
    <header>
        <a href="index.html">
            <img class="logo" src="assets/logo.png" alt="Logo">
        </a>
        <nav>
            <ul>
                <li><a href="index.html">Início</a></li>
                <li><a href="em-alta.html">Em Alta</a></li>
                <li>
                    <a href="categorias.html">Categorias</a>
                    <div class="dropdown">
                        <a href="#">Romance</a>
                        <a href="#">Comédia</a>
                        <a href="#">Ação</a>
                        <a href="#">Fantasia</a>
                        <a href="#">Drama</a>
                        <a href="#">Mistério</a>
                        <a href="#">Thriller</a>
                        <a href="#">Histórico</a>
                    </div>
                </li>
                <li>
                    <a href="comunidade.html">Comunidade</a>
                    <div class="dropdown">
                        <a href="#">Quiz</a>
                        <a href="#">Fórum</a>
                    </div>
                </li>
                <li>
                    <a href="noticias.html">Notícias</a>
                    <div class="dropdown">
                        <a href="#">Notícia 1</a>
                        <a href="#">Notícia 2</a>
                        <a href="#">Notícia 3</a>
                    </div>
                </li>
                <li><a href="sobre.html">Sobre</a></li>
                <li><a href="login.html">Login</a></li>
                <li><a href="cadastro.html" class="active">Cadastro</a></li>
            </ul>
        </nav>
    </header> 

    <div class="form-container">
        <h2>Cadastro</h2>
        <form id="registerForm">
            <div class="input-group">
                <label for="registerEmail">E-mail:</label>
                <input type="email" id="registerEmail" required>
                <div class="status-message" id="emailStatus"></div>
            </div>
            <div class="input-group">
                <label for="registerPassword">Senha:</label>
                <input type="password" id="registerPassword" required>
                <div class="status-message" id="passwordStatus"></div>
            </div>
            <div class="input-group">
                <label for="confirmPassword">Confirmar Senha:</label>
                <input type="password" id="confirmPassword" required>
                <div class="status-message" id="confirmPasswordStatus"></div>
            </div>
            <button type="submit">Cadastrar</button>
        </form>
    </div>

    <script>
        document.getElementById('registerForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const emailStatus = document.getElementById('emailStatus');
            const passwordStatus = document.getElementById('passwordStatus');
            const confirmPasswordStatus = document.getElementById('confirmPasswordStatus');
            const registerEmail = document.getElementById('registerEmail');
            const registerPassword = document.getElementById('registerPassword');
            const confirmPassword = document.getElementById('confirmPassword');
            const email = registerEmail.value;
            const password = registerPassword.value;
            const confirmPass = confirmPassword.value;
            
            let isValid = true;

            // Limpar mensagens anteriores
            emailStatus.innerText = '';
            passwordStatus.innerText = '';
            confirmPasswordStatus.innerText = '';

            // Validação de e-mail
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!email.match(emailPattern)) {
                emailStatus.innerText = 'Por favor, insira um e-mail válido.';
                registerEmail.style.borderColor = 'red';
                isValid = false;
            } else {
                emailStatus.innerText = 'E-mail válido!';
                emailStatus.classList.add('success-message');
                registerEmail.style.borderColor = 'green';
            }

            // Validação de senha
            const passwordPattern = /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
            if (!password.match(passwordPattern)) {
                passwordStatus.innerText = 'A senha deve ter pelo menos 8 caracteres, uma letra maiúscula, um número e um caractere especial.';
                registerPassword.style.borderColor = 'red';
                isValid = false;
            } else {
                passwordStatus.innerText = 'Senha válida!';
                passwordStatus.classList.add('success-message');
                registerPassword.style.borderColor = 'green';
            }

            // Validação de confirmação de senha
            if (password !== confirmPass) {
                confirmPasswordStatus.innerText = 'As senhas não coincidem.';
                confirmPassword.style.borderColor = 'red';
                isValid = false;
            } else {
                confirmPasswordStatus.innerText = 'Senhas coincidem!';
                confirmPasswordStatus.classList.add('success-message');
                confirmPassword.style.borderColor = 'green';
            }

            // Armazenamento se tudo estiver válido
            if (isValid) {
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userPassword', password);
                alert('Cadastro realizado com sucesso!');
                window.location.href = 'login.html';
            }
        });
    </script>
</body>
</html>
